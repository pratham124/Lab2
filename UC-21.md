# Use Case UC-21: Pay Conference Registration Fee Online

**Goal in Context**: Allow an attendee to pay the conference registration fee online so that their registration is completed and they are eligible to attend the conference.
**Scope**: Conference Management System (CMS)
**Level**: User Goal
**Primary Actor**: Attendee
**Secondary Actors**: Online Payment Gateway, Bank/Credit Card Service
**Trigger**: The attendee selects the option to pay the registration fee.

## Success End Condition

- The registration fee is successfully paid, the payment is recorded in the CMS, and the attendee’s registration status is updated to “Paid” or “Confirmed.”

## Failed End Condition

- The payment is not completed, and the attendee is informed that the registration remains unpaid.

## Preconditions

- The attendee is a registered user in the CMS.
- The attendee is authenticated (logged in).
- Registration pricing information is available.
- The attendee has selected a registration category.
- The CMS payment processing service is available.
- The online payment gateway is operational.
- Only credit/debit card payment methods are in scope.

## Main Success Scenario

1. The attendee logs in to the CMS.
2. The attendee navigates to the registration section.
3. The system displays the registration fee and payment options.
4. The attendee selects a credit/debit card payment method.
5. The system redirects the attendee to the secure payment gateway.
6. The attendee enters valid payment details and confirms the payment.
7. The payment gateway processes the transaction successfully.
8. The payment gateway notifies the CMS of the successful payment.
9. The CMS records the payment and updates the attendee’s registration status.
10. The system displays a payment confirmation to the attendee.

## Extensions

- **6a**: The attendee enters invalid or incomplete payment details.
  - **6a1**: The payment gateway rejects the transaction and displays an error message; the attendee may retry and the registration remains unpaid.
- **7a**: The payment gateway declines the payment (e.g., insufficient funds).
  - **7a1**: The system informs the attendee that the payment was declined and that registration remains unpaid.
- **5a**: The payment gateway is unavailable.
  - **5a1**: The system displays an error indicating that online payment is temporarily unavailable and the registration remains unpaid.
- **8a**: A system or communication error occurs after payment but before confirmation.
  - **8a1**: The system informs the attendee that payment status is pending and logs the issue for reconciliation.
- **2a**: The attendee’s registration is already marked “Paid” or “Confirmed.”
  - **2a1**: The system blocks payment initiation and displays the paid status and a payment record summary (amount, date/time, reference).
- **8b**: The payment gateway sends a duplicate confirmation for the same transaction.
  - **8b1**: The system ignores the duplicate and does not create a second payment record or change the registration status.
- **8c**: The payment remains in “Pending Payment Confirmation” for more than 24 hours.
  - **8c1**: The system treats the payment as unpaid and notifies the attendee to retry.
- **5b**: The payment gateway does not confirm the payment immediately.
  - **5b1**: The system shows a pending message and sets status to `pending_confirmation` until confirmation arrives.
- **1a**: The attendee is not authenticated.
  - **1a1**: The system requires login (redirects to login or denies access) and the registration remains `unpaid`.

## Related Information

- **Priority**: High
- **Frequency**: Medium
- **Open Issues**: Refund handling and receipt generation are not specified.

# UC-21 — Fully Dressed Scenario Narratives

## Main Success Scenario

An attendee who has registered for the conference logs in to the Conference Management System and navigates to the registration section. The system displays the selected registration category along with the corresponding registration fee and the available credit/debit card payment option. The attendee chooses the card payment method and is redirected to a secure payment gateway. The attendee enters valid payment details and confirms the transaction. The payment gateway processes the payment successfully and sends a confirmation back to the CMS. The CMS records the successful payment, updates the attendee’s registration status to “Paid” or “Confirmed,” and displays a confirmation message to the attendee indicating that the registration fee has been paid and their attendance is confirmed.

---

## Alternative Path 2a — Registration Already Paid/Confirmed

When the attendee navigates to the registration section, the system determines that the registration is already marked “Paid” or “Confirmed.” The system blocks payment initiation and displays the paid status along with a payment record summary (amount, date/time, reference). The attendee is informed that no further payment is required.

---

## Alternative Path 6a — Invalid or Incomplete Payment Details

The attendee selects the card payment method and is redirected to the payment gateway. While entering payment information, the attendee provides invalid or incomplete details, such as an incorrect card number or missing required fields. The payment gateway detects the issue and rejects the transaction. An error message is displayed indicating that the payment details are invalid or incomplete. The attendee’s payment is not processed, their registration remains unpaid, and the attendee may correct the information and retry the payment.

---

## Alternative Path 7a — Payment Declined by Payment Gateway

The attendee enters valid payment details and submits the payment. The payment gateway processes the request but declines the transaction due to reasons such as insufficient funds or card restrictions. The payment gateway notifies the CMS of the declined transaction. The system informs the attendee that the payment was declined and that their registration has not been completed. The attendee remains in an unpaid registration state and may attempt to pay again using a different payment method.

---

## Alternative Path 5a — Payment Gateway Unavailable

The attendee selects the option to pay the registration fee online, but when the system attempts to connect to the payment gateway, the gateway is unavailable due to a service outage or network issue. The system is unable to redirect the attendee to the payment gateway and instead displays an error message indicating that online payment is temporarily unavailable. The attendee’s registration status remains unpaid, and the attendee may try again later when the payment service is restored.

---

## Alternative Path 8b — Duplicate Payment Confirmation

After a successful payment, the payment gateway sends a duplicate confirmation for the same transaction. The CMS detects the duplicate, ignores it, and does not create a second payment record or change the registration status. The attendee’s registration remains “Paid” or “Confirmed.”

---

## Alternative Path 5b — Confirmation Delayed

After the attendee completes payment, the payment gateway does not provide an immediate confirmation. The system shows a pending message, keeps the registration status as `pending_confirmation`, and does not mark the registration as paid until confirmation is received.

---

## Alternative Path 1a — Unauthenticated Access

An unauthenticated user attempts to initiate payment. The system requires login (redirects to login or denies access) and the registration remains `unpaid`.

---

## Alternative Path 8c — Pending Confirmation Exceeds 24 Hours

After the attendee completes payment, a confirmation does not arrive within 24 hours and the payment remains in “Pending Payment Confirmation.” The system treats the payment as unpaid and notifies the attendee to retry payment. The registration status remains unpaid.

---
