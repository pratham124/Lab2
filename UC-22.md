# Use Case UC-22: Receive Payment Confirmation Ticket

**Goal in Context**: Allow an attendee to receive a payment confirmation ticket after successfully paying the registration fee so that they have proof of registration for the conference.
**Scope**: Conference Management System (CMS)
**Level**: User Goal
**Primary Actor**: Attendee
**Secondary Actors**: Online Payment Gateway, Notification/Email System
**Trigger**: The attendee completes an online registration payment successfully.

## Success End Condition

- The attendee receives a payment confirmation ticket (digital receipt) confirming successful registration, and the ticket is accessible for later reference.
- The ticket includes an invoice number and remains accessible through the conference end date plus 90 days.

## Failed End Condition

- The payment confirmation ticket is not delivered or accessible, and the system informs the attendee of the issue.

## Preconditions

- The attendee is a registered user in the CMS.
- The attendee has successfully completed payment for conference registration.
- The payment has been confirmed by the payment gateway.
- The CMS confirmation and notification services are available.

## Main Success Scenario

1. The attendee completes the online payment process successfully.
2. The payment gateway confirms the successful transaction to the CMS.
3. The CMS generates a payment confirmation ticket containing registration and payment details.
4. The CMS stores the confirmation ticket in the attendee’s account.
5. The CMS sends the payment confirmation ticket to the attendee via email.
6. The system displays a confirmation message indicating that the ticket has been issued.
7. The attendee accesses the confirmation ticket from the CMS or their email.

## Extensions

- **5a**: The notification or email service fails to deliver the confirmation ticket.
  - **5a1**: The system logs the delivery failure, but the ticket remains available in the attendee’s CMS account.
- **3a**: A system or database error occurs while generating or storing the confirmation ticket.
  - **3a1**: The system displays a generic error message with a support contact path indicating that the ticket could not be generated at this time and logs the error.
- **7a**: The attendee attempts to access the ticket without proper authorization.
  - **7a1**: The system denies access and displays an authorization error message.
- **2a**: The payment gateway sends a duplicate success confirmation for the same payment.
  - **2a1**: The system does not create a duplicate ticket and logs the duplicate confirmation event.

## Related Information

- **Priority**: High
- **Frequency**: Medium
- **Open Issues**: Whether the confirmation ticket includes a QR code or downloadable PDF is not specified.
- **Note**: Measurable outcomes for ticket visibility timing, delivery success rate, and access protection are defined in the corresponding feature specification.

# UC-22 — Fully Dressed Scenario Narratives

## Main Success Scenario

An attendee successfully completes the online payment for conference registration through the Conference Management System. The payment gateway confirms that the transaction was successful and sends this confirmation to the CMS. Upon receiving confirmation, the CMS generates a payment confirmation ticket containing the attendee’s registration details, payment information, and an invoice number. The system stores the confirmation ticket in the attendee’s account and sends the ticket to the attendee via email. The system also displays a confirmation message indicating that the payment confirmation ticket has been issued. The attendee can access the confirmation ticket either directly from the CMS or from their email, providing clear proof of successful registration. The ticket remains accessible through the conference end date plus 90 days.

---

## Alternative Path 5a — Confirmation Ticket Delivery Failure

The attendee completes the online payment successfully, and the CMS generates and stores the payment confirmation ticket. However, when the system attempts to send the confirmation ticket to the attendee via email or notification, the delivery fails due to a temporary notification service issue. The system logs the delivery failure for administrative review. Despite the delivery issue, the confirmation ticket remains available in the attendee’s CMS account. The attendee can log in to the CMS and access the ticket directly as proof of registration.

---

## Alternative Path 3a — Error While Generating or Storing Confirmation Ticket

After the payment gateway confirms a successful payment, the CMS attempts to generate and store the payment confirmation ticket. During this process, a system or database error occurs, preventing the ticket from being generated or saved. The system displays a generic error message with a support contact path informing the attendee that the confirmation ticket could not be generated at this time. The error is logged for administrative review. The attendee does not receive a confirmation ticket and may need to retry later or contact support.

---

## Alternative Path 2a — Duplicate Payment Confirmation

The payment gateway sends a duplicate success confirmation for the same payment. The CMS recognizes the duplicate confirmation and does not create a second ticket. The duplicate confirmation is logged for administrative review, and the original confirmation ticket remains the only valid proof of registration.

---

## Alternative Path 7a — Unauthorized Access to Confirmation Ticket

An attendee attempts to access a payment confirmation ticket without proper authorization, such as by trying to view another attendee’s ticket or accessing the ticket while not logged in. The system detects that the requester does not have the necessary permissions to view the ticket. The system denies access and displays an authorization error message. The confirmation ticket is not displayed, and no sensitive registration information is disclosed.
